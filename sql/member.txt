CREATE TABLE "MEMBER" (
	"M_NO"	NUMBER		NOT NULL,
	"ID"	VARCHAR2(15)		NULL,
	"PWD"	VARCHAR2(60)		NULL,
	"NAME"	VARCHAR2(30)		NULL,
	"PHONE"	VARCHAR2(15)		NULL,
	"EMAIL"	VARCHAR2(100)		NULL,
	"ADDRESS"	VARCHAR2(100)		NULL,
	"HINT_NO"	NUMBER		NOT NULL,
	"HINT_A"	VARCHAR2(30)		NULL,
	"M_ENROLL_DATE"	DATE	DEFAULT SYSDATE	NULL,
	"M_MODIFY_DATE"	DATE	DEFAULT SYSDATE	NULL,
	"PWD_CHANGED_DATE"	DATE	DEFAULT SYSDATE	NULL,
	"PWD_EXP_DATE"	DATE		NULL,
	"LOGIN_FAILED_COUNT"	NUMBER	DEFAULT 0	NULL,
	"ACC_LOCK_YN"	VARCHAR2(1)	DEFAULT 'N'	NULL,
	"ACC_SECESSION_YN"	VARCHAR2(1)	DEFAULT 'N'	NULL,
	"ACC_SECESSION_DATE"	DATE		NULL
);

COMMENT ON COLUMN "MEMBER"."PWD_CHANGED_DATE" IS '비밀번호 변경 일시';

ALTER TABLE "MEMBER" ADD CONSTRAINT "PK_MEMBER" PRIMARY KEY (
	"M_NO"
);

CREATE TABLE "MAIN_IMAGE" (
	"MI_NO"	NUMBER		NOT NULL,
	"M_NO"	NUMBER		NOT NULL,
	"MI_ROUTE"	VARCHAR2(1000)		NULL,
	"MI_ORIGIN"	VARCHAR2(255)		NULL,
	"MI_RENAME"	VARCHAR2(255)		NULL,
	"REF_NO"	NUMBER		NULL,
	"MI_STATUS"	VARCHAR2(1)	DEFAULT 'Y'	NULL
);

COMMENT ON COLUMN "MAIN_IMAGE"."M_NO" IS '관리자';

ALTER TABLE "MAIN_IMAGE" ADD CONSTRAINT "PK_MAIN_IMAGE" PRIMARY KEY (
	"MI_NO"
);

CREATE TABLE "PWD_HINT" (
	"HINT_NO"	NUMBER		NOT NULL,
	"HINT_Q"	VARCHAR2(600)		NULL
);

ALTER TABLE "PWD_HINT" ADD CONSTRAINT "PK_PWD_HINT" PRIMARY KEY (
	"HINT_NO"
);

CREATE TABLE "AUTHORITY" (
	"AUTHORITY_CODE"	NUMBER		NOT NULL,
	"AUTHORITY_NAME"	VARCHAR2(255)		NULL,
	"AUTHORITY_DESC"	VARCHAR2(4000)		NULL
);

COMMENT ON COLUMN "AUTHORITY"."AUTHORITY_NAME" IS 'ROLE_로 고쳐야 됨..';

ALTER TABLE "AUTHORITY" ADD CONSTRAINT "PK_AUTHORITY" PRIMARY KEY (
	"AUTHORITY_CODE"
);

CREATE TABLE "MEMBER_ROLE" (
	"M_NO"	NUMBER		NOT NULL,
	"AUTHORITY_CODE"	NUMBER		NOT NULL
);

ALTER TABLE "MEMBER_ROLE" ADD CONSTRAINT "PK_MEMBER_ROLE" PRIMARY KEY (
	"M_NO",
	"AUTHORITY_CODE"
);

ALTER TABLE "MEMBER_ROLE" ADD CONSTRAINT "FK_MEMBER_TO_MEMBER_ROLE_1" FOREIGN KEY (
	"M_NO"
)
REFERENCES "MEMBER" (
	"M_NO"
);

ALTER TABLE "MEMBER_ROLE" ADD CONSTRAINT "FK_AUTHORITY_TO_MEMBER_ROLE_1" FOREIGN KEY (
	"AUTHORITY_CODE"
)
REFERENCES "AUTHORITY" (
	"AUTHORITY_CODE"
);

